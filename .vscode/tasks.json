{
	"version": "2.0.0",
	"inputs": [
		{
			"id": "commitMsg",
			"type": "promptString",
			"description": "Commit message",
			"default": "chore: quick push"
		},
		{
			"id": "tagName",
			"type": "promptString",
			"description": "Tag name (e.g., v3.1.10)",
			"default": "v3.1.10"
		},
		{
			"id": "releaseVersion",
			"type": "promptString",
			"description": "Release version (X.Y.Z, no leading v)",
			"default": "3.2.3"
		},
		{
			"id": "tagMsg",
			"type": "promptString",
			"description": "Tag message",
			"default": "Release"
		},
		{
			"id": "releaseName",
			"type": "promptString",
			"description": "Release display name (GitHub/Gitee)",
			"default": "whois v3.2.3"
		},
		{
			"id": "skipTag",
			"type": "pickString",
			"description": "Skip creating/pushing git tag?",
			"options": ["false", "true"],
			"default": "false"
		},
		{
			"id": "rbHost",
			"type": "promptString",
			"description": "Remote build host (SSH), e.g. your.remote.host",
			"default": "10.0.0.199"
		},
		{
			"id": "rbUser",
			"type": "promptString",
			"description": "Remote SSH user",
			"default": "larson"
		},
		{
			"id": "rbKey",
			"type": "promptString",
			"description": "Private key path (on this PC; Git Bash style, e.g. /c/Users/you/.ssh/id_rsa)",
			"default": "/c/Users/妙妙呜/.ssh/id_rsa"
		},
		{
			"id": "rbSmoke",
			"type": "pickString",
			"description": "Run smoke tests on remote artifacts?",
			"options": [
				"1",
				"0"
			],
			"default": "1"
		},
		{
			"id": "rbQueries",
			"type": "promptString",
			"description": "Smoke queries (space-separated)",
			"default": "8.8.8.8 1.1.1.1"
		},
		{
			"id": "rbSmokeArgs",
			"type": "promptString",
			"description": "Additional Args for Smoke (-a). 不要再加引号，直接输入：-g Domain|Registrar|Name Server|DNSSEC",
			"default": ""
		},
		{
			"id": "rbGolden",
			"type": "pickString",
			"description": "Enable golden check on fetched smoke log? (-G)",
			"options": ["1", "0"],
			"default": "1"
		},
		{
			"id": "rbCflagsExtra",
			"type": "promptString",
			"description": "Per-arch CFLAGS_EXTRA override for make (e.g., -O3 -s). 留空使用脚本默认",
			"default": "-O3 -s"
		},
		{
			"id": "rbSyncDir",
			"type": "promptString",
			"description": "Local sync dir(s) for statics (Git Bash path). 支持多个路径，用 ';' 或 ',' 分隔。",
			"default": "/d/LZProjects/lzispro/release/lzispro/whois;/d/LZProjects/whois/release/lzispro/whois"
		}
	],
	"tasks": [
		{
			"label": "Git: Quick Push",
			"type": "shell",
			"command": "powershell",
			"args": [
				"-NoProfile",
				"-ExecutionPolicy",
				"Bypass",
				"-File",
				"${workspaceFolder}/tools/dev/quick_push.ps1",
				"-Message",
				"${input:commitMsg}"
			],
			"group": "build",
			"problemMatcher": []
		},
		{
			"label": "Remote: Build and Sync whois statics",
			"type": "process",
			"command": "C:\\Program Files\\Git\\bin\\bash.exe",
			"args": [
				"-lc",
				"tools/remote/remote_build_and_test.sh -H ${input:rbHost} -u ${input:rbUser} -k '${input:rbKey}' -r ${input:rbSmoke} -q '${input:rbQueries}' -s '${input:rbSyncDir}' -P 1 -a '${input:rbSmokeArgs}' -G ${input:rbGolden} -E '${input:rbCflagsExtra}'"
			],
			"options": {
				"cwd": "${workspaceFolder}"
			},
			"group": "build",
			"problemMatcher": []
		},
		{
			"label": "Git: Tag Release",
			"type": "shell",
			"command": "powershell",
			"args": [
				"-NoProfile",
				"-ExecutionPolicy",
				"Bypass",
				"-File",
				"${workspaceFolder}/tools/dev/tag_release.ps1",
				"-Tag",
				"${input:tagName}",
				"-Message",
				"${input:tagMsg}"
			],
			"group": "build",
			"problemMatcher": []
		},
		{
			"label": "One-Click Release",
			"type": "shell",
			"command": "powershell",
			"args": [
				"-NoProfile",
				"-ExecutionPolicy",
				"Bypass",
				"-File",
				"${workspaceFolder}/tools/release/one_click_release.ps1",
				"-Version",
				"${input:releaseVersion}",
				"-GithubName",
				"${input:releaseName}",
				"-GiteeName",
				"${input:releaseName}",
				"-SkipTagIf",
				"${input:skipTag}"
			],
			"group": "build",
			"problemMatcher": []
		}
	]
}