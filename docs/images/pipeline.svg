<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="980" height="240" viewBox="0 0 980 240">
  <style>
    .title { font: 700 18px 'Segoe UI', Arial, sans-serif; fill: #222; }
    .label { font: 600 13px 'Segoe UI', Arial, sans-serif; fill: #111; }
    .desc { font: 12px 'Segoe UI', Arial, sans-serif; fill: #555; }
    .box { fill: #f8fafc; stroke: #d0d7de; }
    .arrow { stroke: #64748b; stroke-width: 2; marker-end: url(#arrowhead); }
  </style>
  <defs>
    <marker id="arrowhead" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#64748b" />
    </marker>
  </defs>
  <text x="20" y="26" class="title">Pipeline: query → redirects → title projection → regex filter → fold → output</text>

  <rect x="20" y="50" width="150" height="100" rx="8" class="box"/>
  <text x="30" y="75" class="label">Query</text>
  <text x="30" y="95" class="desc">IP / domain</text>

  <line x1="170" y1="100" x2="220" y2="100" class="arrow"/>

  <rect x="220" y="50" width="180" height="100" rx="8" class="box"/>
  <text x="230" y="75" class="label">Smart redirects</text>
  <text x="230" y="95" class="desc">non-blocking, timeouts,</text>
  <text x="230" y="112" class="desc">retries, loop guard</text>

  <line x1="400" y1="100" x2="450" y2="100" class="arrow"/>

  <rect x="450" y="50" width="140" height="100" rx="8" class="box"/>
  <text x="460" y="75" class="label">-g title</text>
  <text x="460" y="95" class="desc">prefix, case-insensitive</text>

  <line x1="590" y1="100" x2="640" y2="100" class="arrow"/>

  <rect x="640" y="50" width="140" height="100" rx="8" class="box"/>
  <text x="650" y="75" class="label">--grep*</text>
  <text x="650" y="95" class="desc">POSIX ERE, line/block</text>
  <text x="650" y="112" class="desc">keep continuation (opt)</text>

  <line x1="780" y1="100" x2="830" y2="100" class="arrow"/>

  <rect x="830" y="50" width="130" height="100" rx="8" class="box"/>
  <text x="840" y="75" class="label">--fold</text>
  <text x="840" y="95" class="desc">single-line summary</text>
  <text x="840" y="112" class="desc">sep/case options</text>
</svg>
